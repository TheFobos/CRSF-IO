#!/usr/bin/env python3
"""
–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è CRSF Realtime Interface
"""

import subprocess
import sys
import time
import os

def main():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞"""
    print("""
üéØ CRSF Realtime Interface - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
========================================

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ CRSF –¥–∞–Ω–Ω—ã—Ö.

üìã –®–∞–≥–∏:

1. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ API —Å–µ—Ä–≤–µ—Ä–∞
2. –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
3. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

üöÄ –ù–∞—á–∏–Ω–∞–µ–º...
""")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤
    required_files = [
        "test_api.py",
        "crsf_realtime_interface.py"
    ]
    
    for file in required_files:
        if not os.path.exists(file):
            print(f"‚ùå –§–∞–π–ª {file} –Ω–µ –Ω–∞–π–¥–µ–Ω")
            return
    
    print("‚úÖ –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã –Ω–∞–π–¥–µ–Ω—ã")
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º API —Å–µ—Ä–≤–µ—Ä
    print("\n1Ô∏è‚É£ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ API —Å–µ—Ä–≤–µ—Ä–∞...")
    api_process = subprocess.Popen([sys.executable, "test_api.py"])
    
    # –ñ–¥–µ–º –∑–∞–ø—É—Å–∫–∞
    print("‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ API —Å–µ—Ä–≤–µ—Ä–∞...")
    time.sleep(3)
    
    print("‚úÖ API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:8080")
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    print("\n2Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞...")
    print("üí° –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ")
    print("üìä –í—ã —É–≤–∏–¥–∏—Ç–µ:")
    print("   - –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è")
    print("   - RC –∫–∞–Ω–∞–ª—ã —Å –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä–∞–º–∏")
    print("   - GPS –¥–∞–Ω–Ω—ã–µ")
    print("   - –î–∞–Ω–Ω—ã–µ –±–∞—Ç–∞—Ä–µ–∏")
    print("   - –ü–æ–ª–æ–∂–µ–Ω–∏–µ (Roll/Pitch/Yaw)")
    print("   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–∞–∫–µ—Ç–æ–≤")
    
    print("\nüéÆ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:")
    print("   - –ò–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è")
    print("   - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã")
    print("   - –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏")
    
    print("\nüõë –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–∫—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å")
    
    try:
        # –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        subprocess.run([sys.executable, "crsf_realtime_interface.py"])
        
    except KeyboardInterrupt:
        print("\nüõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ Ctrl+C...")
    
    finally:
        # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º API —Å–µ—Ä–≤–µ—Ä
        print("\n3Ô∏è‚É£ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ API —Å–µ—Ä–≤–µ—Ä–∞...")
        api_process.terminate()
        api_process.wait()
        print("‚úÖ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞")

if __name__ == "__main__":
    main()
