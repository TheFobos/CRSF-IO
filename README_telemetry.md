# CRSF –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## –û–ø–∏—Å–∞–Ω–∏–µ

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ CRSF –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–ª–µ—Ç–∞, —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–≤—è–∑–∏ –∏ RC –∫–∞–Ω–∞–ª—ã —Å —á–∞—Å—Ç–æ—Ç–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è 100 –ì—Ü.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì° **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–≤—è–∑–∏**: –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ø–æ–ª–µ—Ç–Ω–æ–º—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É
- üîã **–î–∞–Ω–Ω—ã–µ –±–∞—Ç–∞—Ä–µ–∏**: –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ, —Ç–æ–∫, –µ–º–∫–æ—Å—Ç—å, –æ—Å—Ç–∞—Ç–æ–∫
- ‚úàÔ∏è **–ü–æ–ª–æ–∂–µ–Ω–∏–µ**: –ö—Ä–µ–Ω, —Ç–∞–Ω–≥–∞–∂, —Ä—ã—Å–∫–∞–Ω—å–µ, —Ä–µ–∂–∏–º –ø–æ–ª–µ—Ç–∞
- üéÆ **RC –∫–∞–Ω–∞–ª—ã**: –í—Å–µ 16 –∫–∞–Ω–∞–ª–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üîÑ **–†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è**: –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 10–º—Å (100 –ì—Ü)
- üéõÔ∏è **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ –∏ —Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏

## –ó–∞–ø—É—Å–∫

1. –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:
   ```bash
   make clean && make
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É:
   ```bash
   sudo ./crsf_io_rpi
   ```

3. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É:
   ```
   http://localhost:8081
   ```
   
   –ò–ª–∏ —Å –¥—Ä—É–≥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ —Å–µ—Ç–∏:
   ```
   http://[IP_–ê–î–†–ï–°_RASPBERRY_PI]:8081
   ```

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –°—Ç–∞—Ç—É—Å-–±–∞—Ä
- **–°–≤—è–∑—å**: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–∑–µ–ª–µ–Ω—ã–π = –∞–∫—Ç–∏–≤–Ω–∞, –∫—Ä–∞—Å–Ω—ã–π = –ø–æ—Ç–µ—Ä—è–Ω–∞)
- **–ê–∫—Ç–∏–≤–Ω—ã–π –ø–æ—Ä—Ç**: –¢–µ–∫—É—â–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π UART –ø–æ—Ä—Ç
- **–û–±–Ω–æ–≤–ª–µ–Ω–æ**: –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ö–∞—Ä—Ç–æ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö

#### üîã –ë–∞—Ç–∞—Ä–µ—è
- –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ (–í)
- –¢–æ–∫ (–º–ê)
- –ï–º–∫–æ—Å—Ç—å (–º–ê—á)
- –û—Å—Ç–∞—Ç–æ–∫ (%)


#### ‚úàÔ∏è –ü–æ–ª–æ–∂–µ–Ω–∏–µ
- –ö—Ä–µ–Ω (¬∞)
- –¢–∞–Ω–≥–∞–∂ (¬∞)
- –†—ã—Å–∫–∞–Ω—å–µ (¬∞)
- –†–µ–∂–∏–º –ø–æ–ª–µ—Ç–∞

#### üéÆ RC –ö–∞–Ω–∞–ª—ã
- –í—Å–µ 16 –∫–∞–Ω–∞–ª–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ó–Ω–∞—á–µ–Ω–∏—è –≤ –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥–∞—Ö (1000-2000)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **–ü–æ—Ä—Ç**: 8081 (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ config.h)
- **–ü—Ä–æ—Ç–æ–∫–æ–ª**: HTTP + AJAX
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ö–∞–∂–¥—ã–µ 10–º—Å (100 –ì—Ü) –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- **API**: JSON endpoint `/api/telemetry` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–ö–æ–º–∞–Ω–¥—ã**: REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞–º–∏ –∏ –∫–∞–Ω–∞–ª–∞–º–∏
- **–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º—å—é—Ç–µ–∫—Å—ã –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –±—Ä–∞—É–∑–µ—Ä–æ–º

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –í–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø—É—â–µ–Ω–∞: `ps aux | grep crsf_io_rpi`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç: `netstat -tlnp | grep 8081`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall: `sudo ufw status`

### –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ CRSF –ø–æ–¥–∫–ª—é—á–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª–µ—Ç–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞
1. –£–≤–µ–ª–∏—á—å—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ config.h (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10–º—Å)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–∏—Å—Ç–µ–º—É: `top` –∏–ª–∏ `htop`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ USE_LOG –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—Ç–∞ –∏–ª–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `config.h`:

```cpp
// –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç
#define TELEMETRY_PORT 8080  // 8081 -> –≤–∞—à –ø–æ—Ä—Ç

// –ò–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
#define TELEMETRY_UPDATE_MS 20  // 10 -> –≤–∞—à –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
```

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `telemetry_server.cpp`:

```cpp
// –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç –≤ –∫–æ–¥–µ
startTelemetryServer((CrsfSerial*)crsfGetActive(), 8081); // 8081 -> –≤–∞—à –ø–æ—Ä—Ç
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ –∏–º–µ–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤—Å–µ–º –≤ —Å–µ—Ç–∏. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ IP –∞–¥—Ä–µ—Å–∞–º
